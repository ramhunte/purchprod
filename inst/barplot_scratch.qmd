
# fmt: skip file


```{r}
sumdf_prac |>
        dplyr::filter(
          year %in%
            c(
              2017,
              seq(2012, 2019)
            ),
          statistic == "Total",
          metric == "Production value"
        ) |>
        dplyr::mutate(
          period = dplyr::case_when(
            year == 2017 ~ "Selected Year",
            TRUE ~ "Range Years"
          )
        )  |> 
  dplyr::filter(variable == "All production")

```


# bar plot 
```{r}
library(ggplot2)
library(forcats)




barchart <- ggplot2::ggplot(
    data =  proddf_prac |>
        dplyr::filter(
          year %in% c("2022", "2023"),
          statistic == "Total",
          metric == "Production value",
          variable == "All production"),
    ggplot2::aes(
      x = forcats::fct_reorder(type, value),
      y = value,
      fill = factor(year)
    )
  ) +
    # adding count text to each bar
    ggplot2::geom_col(position = "dodge") +
    ggplot2::labs(fill = "Year", x = "", y = "") +
    ggplot2::scale_fill_manual(
      values = setNames(
        c(pal[["light_text"]], pal[["dark_text"]]),
        c("2022", "2023")
      )
    ) +
    ggplot2::scale_y_continuous(limits = c(0, 780)) +
    ggplot2::scale_x_discrete(
      labels = c(
        "Canned" = "Canned",
        "Fillet" = "Fillet",
        "Fresh" = "Fresh",
        "Frozen" = "Frozen",
        "Headed-and-gutted" = "Headed-and-gutted",
        "Other" = "Other",
        "Unprocessed" = "Unprocessed",
        "Smoked" = "Smoked"
      )
    ) +
    ggplot2::coord_flip() +
    ggplot2::theme(
      # note: need to make these fills as transparent for final figure when stitching together
      # they are colored right now so we can show the bacgkround color in the individual plot
      panel.background = ggplot2::element_rect(
        fill = pal[["bg_plot"]],
        color = pal[["bg_plot"]]
      ),
      plot.background = ggplot2::element_rect(
        fill = pal[["bg_plot"]],
        color = pal[["bg_plot"]]
      ),
      # axis
      axis.line.x = ggplot2::element_blank(),
      axis.line.y = ggplot2::element_blank(),
      axis.text.y = ggplot2::element_text(
        color = pal["value1"],
        # family = "sen",
        size = 18,
        hjust = 1,
        margin = ggplot2::margin(-10, -20, -50, 0)
      ),
      axis.text.x = ggplot2::element_text(
        color = pal["value1"],
        size = 18
      ),
      # axis.text.x = element_blank(),
      axis.ticks.y = ggplot2::element_blank(),
      axis.ticks.x = ggplot2::element_blank(),
      # axis.ticks.x = ggplot2::element_line(color = pal["dark_text"]),

      # grids
      panel.grid.major.x = element_line(color = pal[["value2"]]),
      panel.grid.minor.x = element_blank(),
      panel.grid.major.y = element_blank(),
      panel.grid.minor.y = element_blank(),
      # legend
      legend.position = "none"
    )

barchart
```


